@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================================================
   1. DESIGN TOKENS & THEME VARIABLES (:root)
   ------------------------------------------------------------------------
   Refactored for System 4.8 Alpha Channel support.
   Colors defined as raw RGB triplets (R G B) to allow Tailwind /opacity.
   ======================================================================== */

:root {
  /* üé® BRAND IDENTITY (Core) */
  --color-primary: 251 46 88;    /* #FB2E58 */
  --color-secondary: 141 26 49;  /* #8D1A31 */
  --color-action: 152 201 60;    /* #98C93C */
  --color-special: 255 109 0;    /* #FF6D00 */

  /* üåü RGB CHANNELS (Safety & Feedback) */
  --color-allergy: 255 109 0;           /* #FF6D00 (Matches Special/Orange for Safety) */
  --color-allergy-secondary: 254 226 226; /* #FEE2E2 */
  --color-quiz: 154 0 80;                /* #9A0050 */

  /* ‚òÄÔ∏è LIGHT THEME (Semantic Layers) */
  --color-background: 250 250 250; /* #FAFAFA */
  --color-surface: 255 255 255;    /* #FFFFFF */
  --color-title: 26 26 26;         /* #1A1A1A */
  --color-desc: 74 74 74;          /* #4A4A4A */
  --color-border: 226 232 240;     /* #E2E8F0 */

  /* üå´Ô∏è MINERAL GLASS TOKENS */
  /* Nota: Qui manteniamo RGBA esplicito per le variabili 'glass' specifiche, 
     oppure usiamo i colori base con opacit√† in Tailwind */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.5);
  --glass-blur: 20px;

  --font-display: 'Raleway', 'Sarabun', sans-serif;
  --font-sans: 'Nunito', 'Sarabun', sans-serif;
  --font-accent: 'Roboto Condensed', 'Sarabun', sans-serif;

  --ease-cinematic: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* üåë DARK THEME OVERRIDES */
.dark {
  --color-background: 10 10 10;    /* #0a0a0a */
  --color-surface: 18 18 18;       /* #121212 */
  --color-title: 237 242 239;      /* #EDF2EF */
  --color-desc: 210 220 213;       /* #D2DCD5 */
  --color-border: 45 45 45;        /* #2D2D2D */

  /* Adjust RGB Channels for Dark Mode Legibility */
  --color-allergy: 248 113 113;           /* #F87171 */
  --color-allergy-secondary: 127 29 29;   /* #7F1D1D */

  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.1);
}

@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    /* ‚ö†Ô∏è IMPORTANTE: Usiamo rgb() wrapper perch√© le variabili sono ora triplette pure */
    background-color: rgb(var(--color-background));
    color: rgb(var(--color-desc));
    font-family: var(--font-sans);
    overscroll-behavior-y: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.5s ease, color 0.3s ease;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    color: rgb(var(--color-title));
    font-weight: 900;
  }

  .material-symbols-rounded,
  .material-symbols-outlined {
    font-family: 'Material Symbols Rounded';
    font-weight: normal;
    font-style: normal;
    font-size: 24px;
    display: inline-block;
    line-height: 1;
    text-transform: none;
    letter-spacing: normal;
    white-space: nowrap;
    direction: ltr;
    font-feature-settings: 'liga';
  }
}

@layer utilities {
  .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgb(var(--color-primary)); }

  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  .card-gradient-overlay {
    background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
  }

  .glass-shine {
    position: relative;
    overflow: hidden;
  }
  .glass-shine::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(to right, transparent, rgba(255,255,255,0.2), transparent);
    transform: skewX(-25deg);
    animation: shine 4s infinite linear;
  }
}

@layer components {
  .mineral-panel {
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
  }

  .app-header-layout {
    @apply w-full max-w-[85rem] mx-auto flex flex-col items-start pb-6;
  }
}